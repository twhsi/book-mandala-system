<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ÊõºÈôÄÁæÖÂ∞àÊ°àÁÆ°ÁêÜÁ≥ªÁµ± v4.2 - ÊâãÊ©üÁâàÂÑ™Âåñ</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        :root {
            --cell-font-size: 16px;
            --cell-line-height: 1.3;
            --micro-font-size: 10px;
            --micro-line-height: 1.2;
        }
        
        .font-size-small {
            --cell-font-size: 12px;
            --cell-line-height: 1.2;
            --micro-font-size: 8px;
            --micro-line-height: 1.1;
        }
        
        .font-size-medium {
            --cell-font-size: 16px;
            --cell-line-height: 1.3;
            --micro-font-size: 10px;
            --micro-line-height: 1.2;
        }
        
        .font-size-large {
            --cell-font-size: 20px;
            --cell-line-height: 1.4;
            --micro-font-size: 12px;
            --micro-line-height: 1.3;
        }
        
        .font-size-xlarge {
            --cell-font-size: 24px;
            --cell-line-height: 1.5;
            --micro-font-size: 14px;
            --micro-line-height: 1.4;
        }
        
        * { box-sizing: border-box; }
        
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: #f8fafc;
            overflow: hidden;
            height: 100vh;
            -webkit-overflow-scrolling: touch;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .main-container {
            display: flex;
            height: 100vh;
            width: 100vw;
        }

        .sidebar {
            width: 140px;
            background: #ffffff;
            border-right: 1px solid #e5e7eb;
            overflow-y: auto;
            transition: width 0.3s ease;
            flex-shrink: 0;
            -webkit-overflow-scrolling: touch;
        }

        .sidebar.collapsed {
            width: 0;
            overflow: hidden;
        }

        .content-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-width: 0;
            height: 100vh;
        }

        .toolbar {
            height: 32px;
            background: #ffffff;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            align-items: center;
            padding: 0 6px;
            gap: 3px;
            flex-shrink: 0;
            flex-wrap: wrap;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .toolbar button {
            height: 22px;
            padding: 0 6px;
            font-size: 10px;
            border: 1px solid #d1d5db;
            background: #f9fafb;
            border-radius: 3px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 3px;
            white-space: nowrap;
            flex-shrink: 0;
            -webkit-tap-highlight-color: transparent;
        }

        .toolbar button:hover, .toolbar button:active {
            background: #e5e7eb;
        }

        .toolbar button.primary {
            background: #2563eb;
            color: white;
            border-color: #2563eb;
        }

        .toolbar button.danger {
            background: #dc2626;
            color: white;
            border-color: #dc2626;
        }

        .toolbar button.font-active {
            background: #10b981;
            color: white;
            border-color: #10b981;
        }

        .toolbar button.view-active {
            background: #8b5cf6;
            color: white;
            border-color: #8b5cf6;
        }

        .view-controls {
            display: flex;
            gap: 2px;
            margin-right: 6px;
            padding-right: 6px;
            border-right: 1px solid #d1d5db;
        }

        .font-size-controls {
            display: flex;
            gap: 2px;
            margin-left: 6px;
            padding-left: 6px;
            border-left: 1px solid #d1d5db;
        }

        .main-content {
            flex: 1;
            padding: 6px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            min-height: 0;
        }

        .project-header {
            margin-bottom: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 20px;
            flex-shrink: 0;
        }

        .project-title {
            font-size: 14px;
            font-weight: bold;
            color: #1f2937;
        }

        .breadcrumb {
            font-size: 12px;
            color: #6b7280;
        }

        .mandala-container {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 0;
            padding: 4px;
        }

        .mandala-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2px;
            aspect-ratio: 1;
            width: 100%;
            height: 100%;
            max-width: min(calc(100vh - 80px), calc(100vw - 160px));
            max-height: calc(100vh - 80px);
            background: #d1d5db;
            border-radius: 6px;
            padding: 2px;
        }

        .mandala-grid.view-9x9 {
            grid-template-columns: repeat(9, 1fr);
            gap: 1px;
            background: #374151;
            padding: 1px;
        }

        .grid-cell {
            background: #f3f4f6;
            border-radius: 4px;
            display: flex;
            flex-direction: column;
            padding: 4px;
            min-height: 0;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s ease;
            position: relative;
            -webkit-tap-highlight-color: transparent;
        }

        .grid-cell:hover:not(.center):not(.micro-center) {
            background: #e5e7eb;
        }

        .grid-cell:active {
            transform: scale(0.98);
        }

        .grid-cell.center {
            background: #dbeafe;
            cursor: default;
        }

        .grid-cell.active-layer {
            background: #fef3c7;
            border: 2px solid #f59e0b;
        }

        .micro-cell {
            background: #f3f4f6;
            border-radius: 2px;
            display: flex;
            flex-direction: column;
            padding: 2px;
            min-height: 40px;
            position: relative;
            border: none;
            transition: transform 0.1s ease;
            -webkit-tap-highlight-color: transparent;
        }

        .micro-cell:active {
            transform: scale(0.98);
        }

        .micro-cell.micro-center {
            background: #dbeafe;
        }

        .micro-cell.micro-main {
            background: #fef3c7;
        }

        .micro-cell.micro-sub {
            background: #f3f4f6;
        }

        .micro-cell.border-thick-right {
            border-right: 2px solid #374151;
        }

        .micro-cell.border-thick-bottom {
            border-bottom: 2px solid #374151;
        }

        .cell-label {
            font-size: 9px;
            font-weight: bold;
            color: #374151;
            margin-bottom: 2px;
            text-align: center;
            flex-shrink: 0;
            background: rgba(255, 255, 255, 0.8);
            padding: 2px 4px;
            border-radius: 2px;
        }

        .micro-label {
            font-size: 7px;
            font-weight: bold;
            color: #374151;
            margin-bottom: 1px;
            text-align: center;
            flex-shrink: 0;
            background: rgba(255, 255, 255, 0.8);
            padding: 1px 2px;
            border-radius: 2px;
        }

        .cell-content, .micro-content {
            flex: 1;
            border: none;
            outline: none;
            background: transparent;
            resize: none;
            width: 100%;
            min-height: 0;
            transition: font-size 0.2s ease;
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
            user-select: text;
            -webkit-appearance: none;
        }

        .cell-content {
            font-size: var(--cell-font-size);
            line-height: var(--cell-line-height);
        }

        .micro-content {
            font-size: var(--micro-font-size);
            line-height: var(--micro-line-height);
        }

        .cell-content:focus, .micro-content:focus {
            background: rgba(59, 130, 246, 0.05);
            border: 1px solid #3b82f6;
            border-radius: 4px;
            padding: 2px;
        }

        .project-list {
            padding: 6px;
        }

        .project-group {
            margin-bottom: 8px;
        }

        .group-title {
            font-size: 11px;
            font-weight: bold;
            color: #374151;
            margin-bottom: 3px;
            padding: 3px 6px;
            background: #f3f4f6;
            border-radius: 3px;
            position: sticky;
            top: 0;
            z-index: 2;
        }

        .project-item {
            padding: 3px 6px;
            font-size: 10px;
            color: #6b7280;
            cursor: pointer;
            border-radius: 3px;
            margin-bottom: 1px;
            transition: background-color 0.2s;
            position: relative;
            -webkit-tap-highlight-color: transparent;
        }

        .project-item:hover, .project-item:active {
            background: #f3f4f6;
        }

        .project-item.active {
            background: #dbeafe;
            color: #1d4ed8;
            font-weight: 600;
        }

        .project-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 1;
            pointer-events: none;
        }

        .sync-status {
            display: flex;
            align-items: center;
            gap: 3px;
            font-size: 9px;
            margin-left: auto;
        }

        .sync-status.syncing { color: #2563eb; }
        .sync-status.synced { color: #059669; }
        .sync-status.error { color: #dc2626; }
        .sync-status.offline { color: #6b7280; }
        .sync-status.auto-save { color: #f59e0b; }
        .sync-status.auto-upload { color: #8b5cf6; }

        .toggle-sidebar {
            position: absolute;
            top: 6px;
            left: 6px;
            z-index: 10;
            width: 18px;
            height: 18px;
            background: #f3f4f6;
            border: 1px solid #d1d5db;
            border-radius: 3px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 9px;
            -webkit-tap-highlight-color: transparent;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 8px;
            max-width: 400px;
            width: 90%;
        }

        .modal-header {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 16px;
        }

        .modal-body {
            margin-bottom: 16px;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 8px;
        }

        .form-group {
            margin-bottom: 12px;
        }

        .form-label {
            display: block;
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .form-input {
            width: 100%;
            padding: 8px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            font-size: 12px;
        }

        .form-checkbox {
            margin-right: 8px;
        }

        .form-select {
            width: 100%;
            padding: 8px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            font-size: 12px;
            background: white;
        }

        .grid-cell.sub-layer {
            background: #fef3c7;
        }

        .grid-cell.sub-center {
            background: #a7f3d0;
            cursor: pointer;
        }

        .grid-cell.sub-center:hover {
            background: #86efac;
        }

        .thebrain-indicator {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #10b981;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 10px;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .thebrain-indicator.show {
            opacity: 1;
        }

        .thebrain-indicator.auto-upload {
            background: #8b5cf6;
        }

        /* ÊâãÊ©üÁâàÂ∞àÂ±¨Â∑•ÂÖ∑Âàó */
        .mobile-toolbar {
            height: 40px;
            background: #ffffff;
            border-bottom: 1px solid #e5e7eb;
            display: none;
            align-items: center;
            padding: 0 8px;
            gap: 8px;
            flex-shrink: 0;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .mobile-toolbar button {
            height: 32px;
            padding: 0 8px;
            font-size: 11px;
            border: 1px solid #d1d5db;
            background: #f9fafb;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 4px;
            white-space: nowrap;
            flex-shrink: 0;
            -webkit-tap-highlight-color: transparent;
        }

        .mobile-toolbar button:active {
            background: #e5e7eb;
        }

        .mobile-toolbar button.primary {
            background: #2563eb;
            color: white;
            border-color: #2563eb;
        }

        .mobile-toolbar button.view-active {
            background: #8b5cf6;
            color: white;
            border-color: #8b5cf6;
        }

        /* ÈüøÊáâÂºèË®≠Ë®à */
        @media (max-width: 1200px) {
            .micro-cell {
                min-height: 35px;
            }
            .micro-content {
                font-size: calc(var(--micro-font-size) * 0.9);
            }
        }

        @media (max-width: 800px) {
            .sidebar {
                width: 120px;
            }
            .mandala-grid {
                max-width: calc(100vw - 140px);
            }
            .font-size-controls {
                display: none;
            }
            .micro-cell {
                min-height: 30px;
                padding: 1px;
            }
            .micro-content {
                font-size: calc(var(--micro-font-size) * 0.8);
            }
        }

        /* Âπ≥ÊùøÁâàÂÑ™Âåñ (481px - 768px) */
        @media (max-width: 768px) and (min-width: 481px) {
            .sidebar {
                width: 160px;
            }
            
            .mandala-grid {
                max-width: calc(100vw - 180px);
            }
            
            .grid-cell {
                min-height: 90px;
                padding: 8px;
            }
            
            .cell-content {
                font-size: 15px !important;
            }
            
            .toolbar {
                flex-wrap: wrap;
                height: auto;
                min-height: 36px;
            }
            
            .micro-cell {
                min-height: 50px;
            }
            
            .micro-content {
                font-size: 9px !important;
            }
        }

        /* ÊâãÊ©üÁâàÂÑ™Âåñ (480px ‰ª•‰∏ã) */
        @media (max-width: 480px) {
            body {
                font-size: 12px;
            }
            
            .main-container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                max-height: 30vh;
                order: 2;
                border-right: none;
                border-top: 1px solid #e5e7eb;
                overflow-y: auto;
            }
            
            .sidebar.collapsed {
                height: 0;
                overflow: hidden;
            }
            
            .content-area {
                order: 1;
                height: 70vh;
            }
            
            .toolbar {
                display: none;
            }
            
            .mobile-toolbar {
                display: flex;
            }
            
            .main-content {
                padding: 8px;
            }
            
            .project-header {
                height: 24px;
                margin-bottom: 8px;
            }
            
            .project-title {
                font-size: 16px;
            }
            
            .breadcrumb {
                font-size: 12px;
            }
            
            /* ‰πùÂÆÆÊ†ºÂÑ™Âåñ */
            .mandala-grid {
                max-width: calc(100vw - 16px);
                max-height: calc(70vh - 80px);
                gap: 3px;
                padding: 3px;
            }
            
            .grid-cell {
                padding: 6px;
                min-height: 80px;
            }
            
            .cell-label {
                font-size: 12px;
                margin-bottom: 4px;
                font-weight: bold;
            }
            
            .cell-content {
                font-size: 14px !important;
                line-height: 1.4;
                min-height: 50px;
            }
            
            /* 9√ó9 Ë¶ñÂúñÊâãÊ©üÂÑ™Âåñ */
            .mandala-grid.view-9x9 {
                gap: 1px;
            }
            
            .micro-cell {
                min-height: 60px;
                padding: 3px;
            }
            
            .micro-label {
                font-size: 8px;
                margin-bottom: 2px;
            }
            
            .micro-content {
                font-size: 10px !important;
                line-height: 1.3;
                min-height: 40px;
            }
            
            /* Â∞àÊ°àÂàóË°®ÂÑ™Âåñ */
            .project-list {
                padding: 8px;
                max-height: 25vh;
                overflow-y: auto;
            }
            
            .project-item {
                padding: 8px;
                font-size: 12px;
                margin-bottom: 2px;
                border-radius: 6px;
            }
            
            .group-title {
                font-size: 12px;
                padding: 6px;
                margin-bottom: 6px;
            }
            
            /* Ê®°ÊÖãÊ°ÜÂÑ™Âåñ */
            .modal-content {
                width: 95%;
                max-width: none;
                margin: 20px;
                padding: 16px;
            }
            
            .form-input {
                padding: 12px;
                font-size: 14px;
            }
            
            /* ÁãÄÊÖãÊåáÁ§∫Âô® */
            .thebrain-indicator {
                top: 50px;
                right: 8px;
                font-size: 11px;
                padding: 6px 8px;
            }
            
            .sync-status {
                font-size: 10px;
                margin-left: 8px;
            }
        }

        /* Ê©´Â±èÊ®°ÂºèÂÑ™Âåñ */
        @media (max-width: 900px) and (orientation: landscape) {
            .sidebar {
                width: 120px;
            }
            
            .content-area {
                height: 100vh;
            }
            
            .mandala-grid {
                max-height: calc(100vh - 100px);
            }
            
            .project-list {
                max-height: calc(100vh - 60px);
            }
        }

        @media (max-height: 600px) {
            .toolbar, .mobile-toolbar {
                height: 28px;
            }
            .toolbar button, .mobile-toolbar button {
                height: 20px;
                font-size: 9px;
            }
            .project-header {
                height: 16px;
                margin-bottom: 2px;
            }
            .main-content {
                padding: 4px;
            }
            .micro-cell {
                min-height: 25px;
            }
        }
    </style>
</head>
<body>
    <div class="thebrain-indicator" id="thebrainIndicator">
        <i class="fas fa-save"></i> Ëá™ÂãïÂÑ≤Â≠ò‰∏≠...
    </div>

    <div class="main-container font-size-medium" id="mainContainer">
        <div class="sidebar" id="sidebar">
            <div class="project-list" id="projectList">
                <button class="w-full mb-2 text-xs bg-blue-500 text-white p-1 rounded text-center" onclick="showGitHubModal()">
                    <i class="fas fa-cloud"></i> Èõ≤Á´ØË®≠ÂÆö
                </button>
                
                <div class="project-group">
                    <div class="group-title">2.6 Á≥ªÂàó</div>
                    <div class="project-item" data-project="2.6.1">2.6.1 ÁõÆÊ®ô</div>
                    <div class="project-item" data-project="2.6.2">2.6.2 ÈòªÁ§ô</div>
                    <div class="project-item" data-project="2.6.3">2.6.3 Âä™Âäõ</div>
                    <div class="project-item" data-project="2.6.4">2.6.4 ÁµêÊûú</div>
                    <div class="project-item" data-project="2.6.5">2.6.5 ÊÑèÂ§ñ</div>
                    <div class="project-item" data-project="2.6.6">2.6.6 ËΩâÂΩé</div>
                    <div class="project-item" data-project="2.6.7">2.6.7 ÁµêÂ±Ä</div>
                </div>

                <div class="project-group">
                    <div class="group-title">2.7 Á≥ªÂàó</div>
                    <div class="project-item" data-project="2.7.1">2.7.1 ÁõÆÊ®ô</div>
                    <div class="project-item" data-project="2.7.2">2.7.2 ÈòªÁ§ô</div>
                    <div class="project-item" data-project="2.7.3">2.7.3 Âä™Âäõ</div>
                    <div class="project-item" data-project="2.7.4">2.7.4 ÁµêÊûú</div>
                    <div class="project-item" data-project="2.7.5">2.7.5 ÊÑèÂ§ñ</div>
                    <div class="project-item" data-project="2.7.6">2.7.6 ËΩâÂΩé</div>
                    <div class="project-item" data-project="2.7.7">2.7.7 ÁµêÂ±Ä</div>
                </div>

                <div class="project-group">
                    <div class="group-title">2.8 Á≥ªÂàó</div>
                    <div class="project-item" data-project="2.8.1">2.8.1 ÁõÆÊ®ô</div>
                    <div class="project-item" data-project="2.8.2">2.8.2 ÈòªÁ§ô</div>
                    <div class="project-item" data-project="2.8.3">2.8.3 Âä™Âäõ</div>
                    <div class="project-item" data-project="2.8.4">2.8.4 ÁµêÊûú</div>
                    <div class="project-item" data-project="2.8.5">2.8.5 ÊÑèÂ§ñ</div>
                    <div class="project-item" data-project="2.8.6">2.8.6 ËΩâÂΩé</div>
                    <div class="project-item" data-project="2.8.7">2.8.7 ÁµêÂ±Ä</div>
                </div>

                <div class="project-group">
                    <div class="group-title">2.9 Á≥ªÂàó</div>
                    <div class="project-item" data-project="2.9.1">2.9.1 ÁõÆÊ®ô</div>
                    <div class="project-item" data-project="2.9.2">2.9.2 ÈòªÁ§ô</div>
                    <div class="project-item" data-project="2.9.3">2.9.3 Âä™Âäõ</div>
                    <div class="project-item" data-project="2.9.4">2.9.4 ÁµêÊûú</div>
                    <div class="project-item" data-project="2.9.5">2.9.5 ÊÑèÂ§ñ</div>
                    <div class="project-item" data-project="2.9.6">2.9.6 ËΩâÂΩé</div>
                    <div class="project-item" data-project="2.9.7">2.9.7 ÁµêÂ±Ä</div>
                </div>
            </div>
        </div>

        <div class="content-area">
            <!-- Ê°åÈù¢ÁâàÂ∑•ÂÖ∑Âàó -->
            <div class="toolbar" id="desktopToolbar">
                <button class="toggle-sidebar" onclick="toggleSidebar()">
                    <i class="fas fa-bars"></i>
                </button>

                <div class="view-controls">
                    <button id="view3x3" onclick="setView('3x3')" class="view-active" title="3√ó3 Ë¶ñÂúñ">
                        <i class="fas fa-th"></i> 3√ó3
                    </button>
                    <button id="view9x9" onclick="setView('9x9')" title="9√ó9 Á∏ΩË¶Ω">
                        <i class="fas fa-border-all"></i> 9√ó9
                    </button>
                </div>
                
                <button class="primary" onclick="saveLocal()">
                    <i class="fas fa-save"></i> ÂÑ≤Â≠ò
                </button>
                
                <button onclick="loadLocal()">
                    <i class="fas fa-download"></i> ËºâÂÖ•
                </button>
                
                <button onclick="importJSONFile()">
                    <i class="fas fa-file-import"></i> ÂåØÂÖ•
                </button>
                
                <button onclick="exportJSON()">
                    <i class="fas fa-file-export"></i> ÂåØÂá∫
                </button>
                
                <button onclick="uploadGist()">
                    <i class="fas fa-cloud-upload-alt"></i> ‰∏äÂÇ≥
                </button>
                
                <button onclick="downloadGist()">
                    <i class="fas fa-cloud-download-alt"></i> ‰∏ãËºâ
                </button>
                
                <button onclick="exportOPML()">
                    <i class="fas fa-file-code"></i> OPMLÂåØÂá∫
                </button>
                
                <button onclick="importOPML()">
                    <i class="fas fa-file-upload"></i> OPMLÂåØÂÖ•
                </button>
                
                <button class="danger" onclick="clearAH()">
                    <i class="fas fa-eraser"></i> Ê∏ÖÈô§A-H
                </button>
                
                <button class="danger" onclick="clearAll()">
                    <i class="fas fa-trash"></i> Ê∏ÖÈô§ÂÖ®ÈÉ®
                </button>

                <div class="font-size-controls">
                    <button id="fontSmall" onclick="setFontSize('small')" title="Â∞èÂ≠óÈ´î">
                        <i class="fas fa-font"></i> Â∞è
                    </button>
                    <button id="fontMedium" onclick="setFontSize('medium')" class="font-active" title="‰∏≠Â≠óÈ´î">
                        <i class="fas fa-font"></i> ‰∏≠
                    </button>
                    <button id="fontLarge" onclick="setFontSize('large')" title="Â§ßÂ≠óÈ´î">
                        <i class="fas fa-font"></i> Â§ß
                    </button>
                    <button id="fontXLarge" onclick="setFontSize('xlarge')" title="ÁâπÂ§ßÂ≠óÈ´î">
                        <i class="fas fa-font"></i> ÁâπÂ§ß
                    </button>
                </div>

                <div class="sync-status offline" id="syncStatus">
                    <i class="fas fa-circle"></i>
                    <span>Èõ¢Á∑ö</span>
                </div>
            </div>

            <!-- ÊâãÊ©üÁâàÂ∑•ÂÖ∑Âàó -->
            <div class="mobile-toolbar" id="mobileToolbar">
                <button class="toggle-sidebar" onclick="toggleSidebar()">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="view-controls">
                    <button id="mobileView3x3" onclick="setView('3x3')" class="view-active">
                        <i class="fas fa-th"></i>
                    </button>
                    <button id="mobileView9x9" onclick="setView('9x9')">
                        <i class="fas fa-border-all"></i>
                    </button>
                </div>
                <button class="primary" onclick="saveLocal()">
                    <i class="fas fa-save"></i>
                </button>
                <button onclick="showGitHubModal()" style="background: #10b981; color: white;">
                    <i class="fas fa-cloud"></i>
                </button>
                <div class="sync-status offline" id="mobileSyncStatus">
                    <i class="fas fa-circle"></i>
                    <span>Èõ¢Á∑ö</span>
                </div>
            </div>

            <div class="main-content">
                <div class="project-header">
                    <div class="project-title" id="projectTitle">ÈÅ∏ÊìáÂ∞àÊ°àÈñãÂßãÁ∑®ËºØ</div>
                    <div class="breadcrumb" id="breadcrumb">‰∏ªÂ±§</div>
                </div>

                <div class="mandala-container">
                    <div class="mandala-grid" id="mandalaGrid">
                        <!-- ÂãïÊÖãÁîüÊàêÂÖßÂÆπ -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="githubModal">
        <div class="modal-content">
            <div class="modal-header">GitHub Èõ≤Á´ØË®≠ÂÆö</div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">GitHub Personal Access Token</label>
                    <input type="password" class="form-input" id="githubToken" placeholder="Ëº∏ÂÖ•ÊÇ®ÁöÑ GitHub Token">
                    <div style="font-size: 10px; color: #6b7280; margin-top: 4px;">
                        ÈúÄË¶Å gist Ê¨äÈôêÔºåÁî®ÊñºÈõ≤Á´ØÂÑ≤Â≠òÂêåÊ≠•
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Gist ID (ÂèØÈÅ∏)</label>
                    <input type="text" class="form-input" id="gistId" placeholder="ÁïôÁ©∫Â∞áÂª∫Á´ãÊñ∞ÁöÑ Gist">
                    <div style="font-size: 10px; color: #6b7280; margin-top: 4px;">
                        Áî®ÊñºË∑®ÁÄèË¶ΩÂô®ÂêåÊ≠•ÔºåÂèØÊâãÂãïËº∏ÂÖ•Â∑≤Â≠òÂú®ÁöÑ Gist ID
                    </div>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" class="form-checkbox" id="autoUploadToggle">
                        <span class="form-label" style="display: inline;">ÂïüÁî®Ëá™Âãï‰∏äÂÇ≥</span>
                    </label>
                    <div style="font-size: 10px; color: #6b7280; margin-top: 4px;">
                        ÂÆöÊôÇËá™Âãï‰∏äÂÇ≥Âà∞ GitHubÔºåÈÅøÂÖçÊâãÂãïÊìç‰Ωú
                    </div>
                </div>
                <div class="form-group" id="autoUploadIntervalGroup" style="display: none;">
                    <label class="form-label">Ëá™Âãï‰∏äÂÇ≥ÈñìÈöî</label>
                    <select class="form-select" id="autoUploadInterval">
                        <option value="5">ÊØè 5 ÂàÜÈêò</option>
                        <option value="10" selected>ÊØè 10 ÂàÜÈêò</option>
                        <option value="30">ÊØè 30 ÂàÜÈêò</option>
                    </select>
                    <div style="font-size: 10px; color: #6b7280; margin-top: 4px;">
                        ÂÉÖÂú®ÊúâÂÖßÂÆπËÆäÊõ¥ÊôÇÊâçÊúÉ‰∏äÂÇ≥
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="closeGitHubModal()">ÂèñÊ∂à</button>
                <button class="primary" onclick="saveGitHubConfig()">ÂÑ≤Â≠ò</button>
            </div>
        </div>
    </div>

    <input type="file" id="importJSONInput" accept=".json" style="display: none;" onchange="handleJSONImport(this)">
    <input type="file" id="importOPMLInput" accept=".opml,.xml" style="display: none;" onchange="handleOPMLImport(this)">

    <script>
        // 9√ó9 Ë¶ñÂúñÂ∏∏Êï∏
        const BLOCK_MAP = [
            ['F','C','G'],
            ['B','CENTER','D'], 
            ['E','A','H']
        ];

        const SUBCELL_LAYOUT = [
            ['6','3','7'],
            ['2','','4'],
            ['5','1','8']
        ];

        // Ê™¢Ê∏¨ÁßªÂãïË®≠ÂÇô
        function isMobileDevice() {
            return window.innerWidth <= 480 || /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        }

        // ÂÖ®ÂüüÂÑ≤Â≠òÁÆ°ÁêÜÂô®
        const StorageManager = {
            keys: {
                primary: 'mandala_data_v2',
                backup: 'mandala_backup_v2',
                session: 'mandala_session_v2'
            },
            
            maxRetries: 3,
            
            save: function(data, showIndicator = true) {
                const jsonData = JSON.stringify(data);
                let savedCount = 0;
                
                if (showIndicator) {
                    this.showSaveIndicator();
                }
                
                try {
                    localStorage.setItem(this.keys.primary, jsonData);
                    savedCount++;
                } catch (e) {
                    console.warn('‰∏ªË¶ÅÂÑ≤Â≠òÂ§±Êïó:', e);
                }
                
                try {
                    localStorage.setItem(this.keys.backup, jsonData);
                    savedCount++;
                } catch (e) {
                    console.warn('ÂÇô‰ªΩÂÑ≤Â≠òÂ§±Êïó:', e);
                }
                
                try {
                    sessionStorage.setItem(this.keys.session, jsonData);
                    savedCount++;
                } catch (e) {
                    console.warn('ÊúÉË©±ÂÑ≤Â≠òÂ§±Êïó:', e);
                }
                
                console.log(`ÊâãÊ©üÁâàÂÑ™ÂåñÂÑ≤Â≠ò: ${savedCount}/3 ÂÑ≤Â≠ò‰ΩçÁΩÆÊàêÂäü`);
                return savedCount > 0;
            },
            
            load: function() {
                const sources = [
                    () => localStorage.getItem(this.keys.primary),
                    () => localStorage.getItem(this.keys.backup),
                    () => sessionStorage.getItem(this.keys.session)
                ];
                
                for (let i = 0; i < sources.length; i++) {
                    try {
                        const raw = sources[i]();
                        if (raw) {
                            const data = JSON.parse(raw);
                            console.log(`ÂæûÁ¨¨ ${i + 1} ÂÄã‰ΩçÁΩÆËºâÂÖ•Ë≥áÊñôÊàêÂäü`);
                            return data;
                        }
                    } catch (e) {
                        console.warn(`Á¨¨ ${i + 1} ÂÄã‰ΩçÁΩÆËºâÂÖ•Â§±Êïó:`, e);
                    }
                }
                
                console.log('ÊâÄÊúâÂÑ≤Â≠ò‰ΩçÁΩÆÈÉΩÁÑ°Ê≥ïËºâÂÖ•Ë≥áÊñô');
                return null;
            },
            
            showSaveIndicator: function() {
                const indicator = document.getElementById('thebrainIndicator');
                indicator.classList.remove('auto-upload');
                indicator.innerHTML = '<i class="fas fa-save"></i> Ëá™ÂãïÂÑ≤Â≠ò‰∏≠...';
                indicator.classList.add('show');
                setTimeout(() => {
                    indicator.classList.remove('show');
                }, 2000);
            },

            showUploadIndicator: function() {
                const indicator = document.getElementById('thebrainIndicator');
                indicator.classList.add('auto-upload');
                indicator.innerHTML = '<i class="fas fa-cloud-upload-alt"></i> Ëá™Âãï‰∏äÂÇ≥‰∏≠...';
                indicator.classList.add('show');
                setTimeout(() => {
                    indicator.classList.remove('show');
                }, 3000);
            }
        };

        function parseUrlParams() {
            const params = new URLSearchParams(window.location.search);
            return {
                project: params.get('project'),
                layer: params.get('layer'),
                view: params.get('view'),
                gist: params.get('gist')
            };
        }

        const urlParams = parseUrlParams();
        const initialProject = urlParams.project || '2.6.1';
        const initialLayer = urlParams.layer || 'main';
        const initialView = urlParams.view || '3x3';

        let app = {
            data: null,
            currentProject: initialProject,
            currentLayer: initialLayer,
            currentView: initialView,
            gistId: urlParams.gist || localStorage.getItem('gist_id') || null,
            token: localStorage.getItem('github_token') || '',
            fontSize: localStorage.getItem('font_size') || 'medium',
            autoSaveInterval: null,
            autoUploadInterval: null,
            autoUploadEnabled: localStorage.getItem('auto_upload_enabled') === 'true',
            autoUploadIntervalMinutes: parseInt(localStorage.getItem('auto_upload_interval')) || 10,
            lastSaveTime: Date.now(),
            lastUploadTime: Date.now(),
            lastDataHash: null,
            isMobile: false
        };

        console.log('üéØ ÊâãÊ©üÁâàÂÑ™ÂåñÂàùÂßãÂåñ - Â∞àÊ°à:', app.currentProject, 'Â±§Á¥ö:', app.currentLayer, 'Ë¶ñÂúñ:', app.currentView);

        function calculateDataHash(data) {
            return JSON.stringify(data).split('').reduce((a, b) => {
                a = ((a << 5) - a) + b.charCodeAt(0);
                return a & a;
            }, 0);
        }

        const AutoUploadManager = {
            start: function() {
                if (!app.autoUploadEnabled || !app.token) {
                    console.log('Ëá™Âãï‰∏äÂÇ≥Êú™ÂïüÁî®ÊàñÁÑ° Token');
                    return;
                }

                if (app.autoUploadInterval) {
                    clearInterval(app.autoUploadInterval);
                }

                const intervalMs = app.autoUploadIntervalMinutes * 60 * 1000;
                console.log(`ÂïüÂãïËá™Âãï‰∏äÂÇ≥ÔºåÈñìÈöî: ${app.autoUploadIntervalMinutes} ÂàÜÈêò`);

                app.autoUploadInterval = setInterval(async () => {
                    if (!app.data) return;

                    const currentHash = calculateDataHash(app.data);
                    
                    if (app.lastDataHash === currentHash) {
                        console.log('Ë≥áÊñôÁÑ°ËÆäÊõ¥ÔºåË∑≥ÈÅéËá™Âãï‰∏äÂÇ≥');
                        return;
                    }

                    console.log('Ê™¢Ê∏¨Âà∞Ë≥áÊñôËÆäÊõ¥ÔºåÈñãÂßãËá™Âãï‰∏äÂÇ≥...');
                    StorageManager.showUploadIndicator();
                    setSyncStatus('auto-upload', 'Ëá™Âãï‰∏äÂÇ≥‰∏≠...');

                    try {
                        await this.performAutoUpload();
                        app.lastDataHash = currentHash;
                        app.lastUploadTime = Date.now();
                        console.log('‚úÖ Ëá™Âãï‰∏äÂÇ≥ÊàêÂäü');
                    } catch (error) {
                        console.error('‚ùå Ëá™Âãï‰∏äÂÇ≥Â§±Êïó:', error);
                        setSyncStatus('error', 'Ëá™Âãï‰∏äÂÇ≥Â§±Êïó');
                        setTimeout(() => {
                            setSyncStatus('synced', 'Â∑≤ÈÄ£Êé•');
                        }, 3000);
                    }
                }, intervalMs);
            },

            stop: function() {
                if (app.autoUploadInterval) {
                    clearInterval(app.autoUploadInterval);
                    app.autoUploadInterval = null;
                    console.log('Ëá™Âãï‰∏äÂÇ≥Â∑≤ÂÅúÊ≠¢');
                }
            },

            performAutoUpload: async function() {
                if (!app.token || !app.data) {
                    throw new Error('Áº∫Â∞ë Token ÊàñË≥áÊñô');
                }

                const dataToSave = {
                    ...app.data,
                    updatedAt: new Date().toISOString()
                };

                const body = {
                    description: `ÊõºÈôÄÁæÖÂ∞àÊ°àÁÆ°ÁêÜÁ≥ªÁµ±Ë≥áÊñô - ${app.currentProject} (ÊâãÊ©üÁâàÂÑ™ÂåñËá™Âãï‰∏äÂÇ≥)`,
                    public: false,
                    files: {
                        'mandala_data.json': {
                            content: JSON.stringify(dataToSave, null, 2)
                        }
                    }
                };

                const isCreate = !app.gistId;
                const url = isCreate ? 'https://api.github.com/gists' : `https://api.github.com/gists/${app.gistId}`;
                const method = isCreate ? 'POST' : 'PATCH';

                const response = await fetch(url, {
                    method,
                    headers: {
                        'Authorization': `token ${app.token}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(body)
                });

                if (response.ok) {
                    const result = await response.json();
                    if (isCreate) {
                        app.gistId = result.id;
                        localStorage.setItem('gist_id', app.gistId);
                    }
                    setSyncStatus('synced', 'Ëá™ÂãïÂêåÊ≠•');
                    setTimeout(() => {
                        setSyncStatus('synced', 'Â∑≤ÈÄ£Êé•');
                    }, 2000);
                } else {
                    throw new Error(`HTTP ${response.status}: ${await response.text()}`);
                }
            }
        };

        // Ë¶ñÂúñÂàáÊèõÂäüËÉΩ
        function setView(view) {
            app.currentView = view;
            localStorage.setItem('current_view', view);
            
            // Êõ¥Êñ∞Ê°åÈù¢ÁâàÊåâÈàïÁãÄÊÖã
            document.querySelectorAll('.view-controls button').forEach(btn => {
                btn.classList.remove('view-active');
            });
            
            // Êõ¥Êñ∞Â∞çÊáâÁöÑÊåâÈàï
            const desktopBtn = document.getElementById(`view${view}`);
            const mobileBtn = document.getElementById(`mobileView${view}`);
            
            if (desktopBtn) desktopBtn.classList.add('view-active');
            if (mobileBtn) mobileBtn.classList.add('view-active');
            
            // ÈáçÊñ∞Ê∏≤Êüì
            if (view === '9x9') {
                renderNineByNine();
                updateBreadcrumb9x9();
            } else {
                if (app.currentLayer === 'main') {
                    renderMainLayer();
                } else {
                    renderSubLayer(app.currentLayer);
                }
                updateBreadcrumb();
            }
            
            syncUrl(true);
            console.log('Ë¶ñÂúñÂ∑≤ÂàáÊèõÁÇ∫:', view);
        }

        // 9√ó9 Ë¶ñÂúñÊ∏≤Êüì
        function renderNineByNine() {
            const grid = document.getElementById('mandalaGrid');
            const project = app.data.projects[app.currentProject];
            
            grid.className = 'mandala-grid view-9x9';
            grid.innerHTML = '';
            
            // Ê∏≤Êüì 9√ó9 = 81 ÂÄãÊ†ºÂ≠ê
            for (let row = 0; row < 9; row++) {
                for (let col = 0; col < 9; col++) {
                    const blockRow = Math.floor(row / 3);
                    const blockCol = Math.floor(col / 3);
                    const cellRow = row % 3;
                    const cellCol = col % 3;
                    
                    const blockLetter = BLOCK_MAP[blockRow][blockCol];
                    const subPosition = SUBCELL_LAYOUT[cellRow][cellCol];
                    
                    let cellKey, cellClass, cellLabel;
                    
                    if (blockLetter === 'CENTER') {
                        if (subPosition === '') {
                            // ‰∏≠ÂøÉÊ†ºÂ≠ê
                            cellKey = 'CENTER';
                            cellClass = 'micro-cell micro-center';
                            cellLabel = '‰∏≠ÂøÉ';
                        } else {
                            // ‰∏≠ÂøÉÂçÄÂüüÁöÑ‰∏ªÂ±§Â≠óÊØç
                            const mainLetter = ['F','C','G','B','','D','E','A','H'][cellRow * 3 + cellCol];
                            if (mainLetter) {
                                cellKey = mainLetter;
                                cellClass = 'micro-cell micro-main';
                                cellLabel = mainLetter;
                            } else {
                                // Á©∫Ê†º
                                cellKey = null;
                                cellClass = 'micro-cell';
                                cellLabel = '';
                            }
                        }
                    } else {
                        if (subPosition === '') {
                            // Â≠êÂ±§‰∏≠ÂøÉ (È°ØÁ§∫‰∏ªÂ±§ÂÖßÂÆπ)
                            cellKey = blockLetter;
                            cellClass = 'micro-cell micro-main';
                            cellLabel = blockLetter;
                        } else {
                            // Â≠êÂ±§Ê†ºÂ≠ê
                            cellKey = blockLetter + subPosition;
                            cellClass = 'micro-cell micro-sub';
                            cellLabel = blockLetter + subPosition;
                        }
                    }
                    
                    // Ê∑ªÂä†ÂàÜÈöîÁ∑ö
                    if ((col + 1) % 3 === 0 && col < 8) {
                        cellClass += ' border-thick-right';
                    }
                    if ((row + 1) % 3 === 0 && row < 8) {
                        cellClass += ' border-thick-bottom';
                    }
                    
                    const cellDiv = document.createElement('div');
                    cellDiv.className = cellClass;
                    
                    if (cellKey) {
                        const cellContent = project.cells[cellKey] || '';
                        cellDiv.innerHTML = `
                            <div class="micro-label">${cellLabel}</div>
                            <textarea class="micro-content" placeholder="Ëº∏ÂÖ•ÂÖßÂÆπ..." data-cell="${cellKey}">${cellContent}</textarea>
                        `;
                    } else {
                        cellDiv.innerHTML = `<div class="micro-label"></div>`;
                    }
                    
                    grid.appendChild(cellDiv);
                }
            }
            
            bindTextareaEvents();
        }

        function updateBreadcrumb9x9() {
            const breadcrumb = document.getElementById('breadcrumb');
            breadcrumb.textContent = '9√ó9 Á∏ΩË¶ΩË¶ñÂúñ';
        }

        // Ê∏≤Êüì‰∏ªÂ±§ 3√ó3 ‰πùÂÆÆÊ†º
        function renderMainLayer() {
            const grid = document.getElementById('mandalaGrid');
            const project = app.data.projects[app.currentProject];
            
            grid.className = 'mandala-grid';
            grid.innerHTML = `
                <div class="grid-cell" data-position="F" onclick="enterLayer('F')">
                    <div class="cell-label">F</div>
                    <textarea class="cell-content" placeholder="ÈªûÊìäÂ±ïÈñãÊÄùÁ∂≠..." data-cell="F">${project.cells.F || ''}</textarea>
                </div>
                <div class="grid-cell" data-position="C" onclick="enterLayer('C')">
                    <div class="cell-label">C</div>
                    <textarea class="cell-content" placeholder="ÈªûÊìäÂ±ïÈñãÊÄùÁ∂≠..." data-cell="C">${project.cells.C || ''}</textarea>
                </div>
                <div class="grid-cell" data-position="G" onclick="enterLayer('G')">
                    <div class="cell-label">G</div>
                    <textarea class="cell-content" placeholder="ÈªûÊìäÂ±ïÈñãÊÄùÁ∂≠..." data-cell="G">${project.cells.G || ''}</textarea>
                </div>
                <div class="grid-cell" data-position="B" onclick="enterLayer('B')">
                    <div class="cell-label">B</div>
                    <textarea class="cell-content" placeholder="ÈªûÊìäÂ±ïÈñãÊÄùÁ∂≠..." data-cell="B">${project.cells.B || ''}</textarea>
                </div>
                <div class="grid-cell center" data-position="CENTER">
                    <div class="cell-label">‰∏≠ÂøÉ</div>
                    <textarea class="cell-content" placeholder="Â∞àÊ°àÊ†∏ÂøÉ‰∏ªÈ°å..." data-cell="CENTER">${project.cells.CENTER || ''}</textarea>
                </div>
                <div class="grid-cell" data-position="D" onclick="enterLayer('D')">
                    <div class="cell-label">D</div>
                    <textarea class="cell-content" placeholder="ÈªûÊìäÂ±ïÈñãÊÄùÁ∂≠..." data-cell="D">${project.cells.D || ''}</textarea>
                </div>
                <div class="grid-cell" data-position="E" onclick="enterLayer('E')">
                    <div class="cell-label">E</div>
                    <textarea class="cell-content" placeholder="ÈªûÊìäÂ±ïÈñãÊÄùÁ∂≠..." data-cell="E">${project.cells.E || ''}</textarea>
                </div>
                <div class="grid-cell" data-position="A" onclick="enterLayer('A')">
                    <div class="cell-label">A</div>
                    <textarea class="cell-content" placeholder="ÈªûÊìäÂ±ïÈñãÊÄùÁ∂≠..." data-cell="A">${project.cells.A || ''}</textarea>
                </div>
                <div class="grid-cell" data-position="H" onclick="enterLayer('H')">
                    <div class="cell-label">H</div>
                    <textarea class="cell-content" placeholder="ÈªûÊìäÂ±ïÈñãÊÄùÁ∂≠..." data-cell="H">${project.cells.H || ''}</textarea>
                </div>
            `;
            
            bindTextareaEvents();
        }

        // Ê∏≤ÊüìÂ≠êÂ±§ 3√ó3 ‰πùÂÆÆÊ†º
        function renderSubLayer(letter) {
            const grid = document.getElementById('mandalaGrid');
            const project = app.data.projects[app.currentProject];
            
            grid.className = 'mandala-grid';
            grid.innerHTML = `
                <div class="grid-cell sub-layer" data-position="${letter}6">
                    <div class="cell-label">${letter}6</div>
                    <textarea class="cell-content" placeholder="Ëº∏ÂÖ•ÂÖßÂÆπ..." data-cell="${letter}6">${project.cells[letter + '6'] || ''}</textarea>
                </div>
                <div class="grid-cell sub-layer" data-position="${letter}3">
                    <div class="cell-label">${letter}3</div>
                    <textarea class="cell-content" placeholder="Ëº∏ÂÖ•ÂÖßÂÆπ..." data-cell="${letter}3">${project.cells[letter + '3'] || ''}</textarea>
                </div>
                <div class="grid-cell sub-layer" data-position="${letter}7">
                    <div class="cell-label">${letter}7</div>
                    <textarea class="cell-content" placeholder="Ëº∏ÂÖ•ÂÖßÂÆπ..." data-cell="${letter}7">${project.cells[letter + '7'] || ''}</textarea>
                </div>
                <div class="grid-cell sub-layer" data-position="${letter}2">
                    <div class="cell-label">${letter}2</div>
                    <textarea class="cell-content" placeholder="Ëº∏ÂÖ•ÂÖßÂÆπ..." data-cell="${letter}2">${project.cells[letter + '2'] || ''}</textarea>
                </div>
                <div class="grid-cell sub-center" data-position="${letter}" onclick="backToMain()">
                    <div class="cell-label">${letter} (ËøîÂõû)</div>
                    <textarea class="cell-content" placeholder="ÈªûÊìäËøîÂõû‰∏ªÂ±§..." data-cell="${letter}" readonly>${project.cells[letter] || ''}</textarea>
                </div>
                <div class="grid-cell sub-layer" data-position="${letter}4">
                    <div class="cell-label">${letter}4</div>
                    <textarea class="cell-content" placeholder="Ëº∏ÂÖ•ÂÖßÂÆπ..." data-cell="${letter}4">${project.cells[letter + '4'] || ''}</textarea>
                </div>
                <div class="grid-cell sub-layer" data-position="${letter}5">
                    <div class="cell-label">${letter}5</div>
                    <textarea class="cell-content" placeholder="Ëº∏ÂÖ•ÂÖßÂÆπ..." data-cell="${letter}5">${project.cells[letter + '5'] || ''}</textarea>
                </div>
                <div class="grid-cell sub-layer" data-position="${letter}1">
                    <div class="cell-label">${letter}1</div>
                    <textarea class="cell-content" placeholder="Ëº∏ÂÖ•ÂÖßÂÆπ..." data-cell="${letter}1">${project.cells[letter + '1'] || ''}</textarea>
                </div>
                <div class="grid-cell sub-layer" data-position="${letter}8">
                    <div class="cell-label">${letter}8</div>
                    <textarea class="cell-content" placeholder="Ëº∏ÂÖ•ÂÖßÂÆπ..." data-cell="${letter}8">${project.cells[letter + '8'] || ''}</textarea>
                </div>
            `;
            
            bindTextareaEvents();
        }

        // ÈÄ≤ÂÖ•Â≠êÂ±§
        function enterLayer(letter) {
            if (app.currentView === '9x9') return; // 9√ó9 Ë¶ñÂúñ‰∏çÂÖÅË®±Ë∑≥ËΩâ
            
            app.currentLayer = letter;
            updateBreadcrumb();
            renderSubLayer(letter);
            syncUrl(true);
        }

        // ËøîÂõû‰∏ªÂ±§
        function backToMain() {
            app.currentLayer = 'main';
            updateBreadcrumb();
            renderMainLayer();
            syncUrl(true);
        }

        // Êõ¥Êñ∞È∫µÂåÖÂ±ë
        function updateBreadcrumb() {
            const breadcrumb = document.getElementById('breadcrumb');
            if (app.currentLayer === 'main') {
                breadcrumb.innerHTML = '‰∏ªÂ±§';
            } else {
                breadcrumb.innerHTML = `‰∏ªÂ±§ > <span style="cursor: pointer; color: #2563eb;" onclick="backToMain()">${app.currentLayer} Â≠êÂ±§</span>`;
            }
        }

        // Êõ¥Êñ∞Â∞àÊ°àÊ®ôÈ°å
        function updateProjectTitle() {
            const project = app.data.projects[app.currentProject];
            document.getElementById('projectTitle').textContent = project.title;
        }

        // Êõ¥Êñ∞ÈÅ∏‰∏≠Â∞àÊ°àÁãÄÊÖã
        function updateActiveProject() {
            document.querySelectorAll('.project-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.project === app.currentProject) {
                    item.classList.add('active');
                }
            });
        }

        // Ë®≠ÁΩÆÂ∞àÊ°àÈªûÊìä‰∫ã‰ª∂
        function setupProjectClickHandlers() {
            document.querySelectorAll('.project-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const projectId = this.dataset.project;
                    if (projectId && projectId !== app.currentProject) {
                        loadProject(projectId, true);
                    }
                });
            });
        }

        // ÊâãÊ©üÁâàËß∏ÊéßÂÑ™Âåñ
        function optimizeTouchForMobile() {
            if (app.isMobile) {
                // Â¢ûÂä†Ëß∏ÊéßÂçÄÂüü
                document.addEventListener('touchstart', function(e) {
                    const target = e.target;
                    if (target.classList.contains('cell-content') || target.classList.contains('micro-content')) {
                        target.focus();
                    }
                });
                
                // ÂÑ™ÂåñËôõÊì¨ÈçµÁõ§
                document.addEventListener('focusin', function(e) {
                    if (e.target.tagName === 'TEXTAREA') {
                        setTimeout(() => {
                            e.target.scrollIntoView({
                                behavior: 'smooth',
                                block: 'center'
                            });
                        }, 300);
                    }
                });

                // Èò≤Ê≠¢È†ÅÈù¢Á∏ÆÊîæ
                document.addEventListener('touchmove', function(e) {
                    if (e.scale !== 1) {
                        e.preventDefault();
                    }
                }, { passive: false });
            }
        }

        // Á∂ÅÂÆö textarea ‰∫ã‰ª∂
        function bindTextareaEvents() {
            document.querySelectorAll('.cell-content, .micro-content').forEach(textarea => {
                textarea.addEventListener('input', function() {
                    const cellKey = this.dataset.cell;
                    if (cellKey && app.data && app.data.projects[app.currentProject]) {
                        app.data.projects[app.currentProject].cells[cellKey] = this.value;
                        app.lastSaveTime = Date.now();
                        // Âç≥ÊôÇ‰øùÂ≠òÂà∞ sessionStorage
                        StorageManager.save(app.data, false);
                    }
                });
                
                textarea.addEventListener('blur', function() {
                    // Â§±ÁÑ¶ÊôÇÂº∑Âà∂‰øùÂ≠ò
                    if (app.data) {
                        StorageManager.save(app.data, true);
                    }
                });

                // ÊâãÊ©üÁâàËß∏ÊéßÂÑ™Âåñ
                if (app.isMobile) {
                    textarea.addEventListener('touchstart', function(e) {
                        e.stopPropagation();
                    });
                }
            });
        }

        // URL ÂêåÊ≠•
        function syncUrl(replaceState = false) {
            const params = new URLSearchParams();
            params.set('project', app.currentProject);
            params.set('layer', app.currentLayer);
            params.set('view', app.currentView);
            if (app.gistId) {
                params.set('gist', app.gistId);
            }
            
            const newUrl = `${window.location.pathname}?${params.toString()}`;
            if (replaceState) {
                window.history.replaceState(null, '', newUrl);
            } else {
                window.history.pushState(null, '', newUrl);
            }
        }

        // ËºâÂÖ•Â∞àÊ°à
        function loadProject(projectId, updateUrl = true) {
            console.log('ËºâÂÖ•Â∞àÊ°à:', projectId);
            if (!app.data || !app.data.projects[projectId]) {
                console.error('Â∞àÊ°à‰∏çÂ≠òÂú®:', projectId, 'ÂèØÁî®Â∞àÊ°à:', Object.keys(app.data?.projects || {}));
                return;
            }
            
            app.currentProject = projectId;
            app.currentLayer = 'main';
            app.data.meta.activeProject = projectId;
            
            updateProjectTitle();
            
            if (app.currentView === '9x9') {
                renderNineByNine();
                updateBreadcrumb9x9();
            } else {
                updateBreadcrumb();
                renderMainLayer();
            }
            
            updateActiveProject();
            
            if (updateUrl) {
                syncUrl(false);
            }
            
            console.log('Â∞àÊ°àËºâÂÖ•ÂÆåÊàê:', projectId);
        }

        // Â≠óÈ´îÂ§ßÂ∞èÊéßÂà∂ÂáΩÊï∏
        function setFontSize(size) {
            app.fontSize = size;
            localStorage.setItem('font_size', size);
            
            const container = document.getElementById('mainContainer');
            container.className = container.className.replace(/font-size-\w+/, '') + ` font-size-${size}`;
            
            document.querySelectorAll('.font-size-controls button').forEach(btn => {
                btn.classList.remove('font-active');
            });
            const targetBtn = document.getElementById(`font${size.charAt(0).toUpperCase() + size.slice(1)}`);
            if (targetBtn) {
                targetBtn.classList.add('font-active');
            }
            
            console.log('Â≠óÈ´îÂ§ßÂ∞èÂ∑≤Êõ¥Êñ∞ÁÇ∫:', size);
        }

        function initFontSize() {
            setFontSize(app.fontSize);
        }

        function initView() {
            setView(app.currentView);
        }

        function createEmptyData() {
            const series = ['2.6','2.7','2.8','2.9'];
            const types = ['1','2','3','4','5','6','7'];
            const typeNames = ['ÁõÆÊ®ô','ÈòªÁ§ô','Âä™Âäõ','ÁµêÊûú','ÊÑèÂ§ñ','ËΩâÂΩé','ÁµêÂ±Ä'];
            const projects = {};
            
            series.forEach(s => {
                types.forEach((t, index) => {
                    const id = `${s}.${t}`;
                    projects[id] = {
                        title: `${id} ${typeNames[index]}`,
                        cells: {
                            CENTER: '',
                            F: '', C: '', G: '', B: '', D: '', E: '', A: '', H: '',
                            F1: '', F2: '', F3: '', F4: '', F5: '', F6: '', F7: '', F8: '',
                            C1: '', C2: '', C3: '', C4: '', C5: '', C6: '', C7: '', C8: '',
                            G1: '', G2: '', G3: '', G4: '', G5: '', G6: '', G7: '', G8: '',
                            B1: '', B2: '', B3: '', B4: '', B5: '', B6: '', B7: '', B8: '',
                            D1: '', D2: '', D3: '', D4: '', D5: '', D6: '', D7: '', D8: '',
                            E1: '', E2: '', E3: '', E4: '', E5: '', E6: '', E7: '', E8: '',
                            A1: '', A2: '', A3: '', A4: '', A5: '', A6: '', A7: '', A8: '',
                            H1: '', H2: '', H3: '', H4: '', H5: '', H6: '', H7: '', H8: ''
                        },
                        history: []
                    };
                });
            });

            return {
                version: '4.2',
                updatedAt: new Date().toISOString(),
                meta: {
                    activeProject: app.currentProject,
                    fontSize: app.fontSize,
                    currentView: app.currentView,
                    autoUpload: app.autoUploadEnabled,
                    autoUploadInterval: app.autoUploadIntervalMinutes,
                    keyboardShortcuts: false,
                    mobileOptimized: true,
                    schema: 'mandala-mobile-optimized-v4.2'
                },
                projects: projects
            };
        }

        function migrateToV2(data) {
            if (!data.version || data.version === '1.0') {
                const newData = createEmptyData();
                if (data.projects) {
                    Object.keys(data.projects).forEach(projectId => {
                        if (newData.projects[projectId]) {
                            const oldProject = data.projects[projectId];
                            if (oldProject.data) {
                                Object.keys(oldProject.data).forEach(cell => {
                                    if (newData.projects[projectId].cells[cell] !== undefined) {
                                        newData.projects[projectId].cells[cell] = oldProject.data[cell];
                                    }
                                });
                            }
                            newData.projects[projectId].title = oldProject.name || newData.projects[projectId].title;
                        }
                    });
                }
                return newData;
            }
            
            if (data.meta) {
                if (data.meta.fontSize) {
                    app.fontSize = data.meta.fontSize;
                    localStorage.setItem('font_size', app.fontSize);
                }
                if (data.meta.currentView) {
                    app.currentView = data.meta.currentView;
                    localStorage.setItem('current_view', app.currentView);
                }
                if (data.meta.autoUpload !== undefined) {
                    app.autoUploadEnabled = data.meta.autoUpload;
                    localStorage.setItem('auto_upload_enabled', app.autoUploadEnabled);
                }
                if (data.meta.autoUploadInterval) {
                    app.autoUploadIntervalMinutes = data.meta.autoUploadInterval;
                    localStorage.setItem('auto_upload_interval', app.autoUploadIntervalMinutes);
                }
            }
            
            if (!data.meta.schema || !data.meta.schema.includes('mobile-optimized')) {
                data.version = '4.2';
                data.meta.schema = 'mandala-mobile-optimized-v4.2';
                data.meta.currentView = app.currentView;
                data.meta.keyboardShortcuts = false;
                data.meta.mobileOptimized = true;
                data.meta.autoUpload = app.autoUploadEnabled;
                data.meta.autoUploadInterval = app.autoUploadIntervalMinutes;
                console.log('ÂçáÁ¥öÂà∞ÊâãÊ©üÁâàÂÑ™ÂåñÁâàÊú¨');
            }
            
            return data;
        }

        function initData() {
            console.log('üéØ ÊâãÊ©üÁâàÂÑ™ÂåñÔºöÊ≠£Âú®ÂàùÂßãÂåñË≥áÊñô...Áï∂ÂâçÂ∞àÊ°à:', app.currentProject);
            
            const loadedData = StorageManager.load();
            
            if (loadedData) {
                try {
                    app.data = migrateToV2(loadedData);
                    console.log('‚úÖ ÊâãÊ©üÁâàÂÑ™ÂåñÔºöË≥áÊñôËºâÂÖ•ÊàêÂäü');
                } catch (e) {
                    console.error('‚ùå Ë≥áÊñôËºâÂÖ•Â§±Êïó:', e);
                    app.data = createEmptyData();
                }
            } else {
                console.log('üÜï Âª∫Á´ãÊñ∞ÁöÑÁ©∫ÁôΩË≥áÊñô');
                app.data = createEmptyData();
            }
            
            initFontSize();
            initView();
            
            console.log('ËºâÂÖ•Â∞àÊ°à:', app.currentProject);
            loadProject(app.currentProject, false);
            
            startAutoSave();
            if (app.autoUploadEnabled && app.token) {
                AutoUploadManager.start();
            }

            app.lastDataHash = calculateDataHash(app.data);
        }

        function startAutoSave() {
            if (app.autoSaveInterval) {
                clearInterval(app.autoSaveInterval);
            }
            
            app.autoSaveInterval = setInterval(() => {
                if (Date.now() - app.lastSaveTime > 8000) {
                    saveToStorage(false);
                    setSyncStatus('auto-save', 'Ëá™ÂãïÂÑ≤Â≠ò');
                    setTimeout(() => {
                        if (app.token) {
                            setSyncStatus('synced', 'Â∑≤ÈÄ£Êé•');
                        } else {
                            setSyncStatus('offline', 'Èõ¢Á∑ö');
                        }
                    }, 1000);
                }
            }, 10000);
            
            console.log('üéØ ÊâãÊ©üÁâàÂÑ™ÂåñÔºöËá™ÂãïÂÑ≤Â≠òÂ∑≤ÂïüÂãï');
        }

        function saveToStorage(showIndicator = true) {
            if (app.data) {
                StorageManager.save(app.data, showIndicator);
            }
        }

        // ÂÅ¥ÈÇäÊ¨ÑÂàáÊèõ
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('collapsed');
        }

        // ÂêåÊ≠•ÁãÄÊÖãË®≠ÁΩÆ
        function setSyncStatus(status, text) {
            const syncStatusElements = document.querySelectorAll('.sync-status');
            syncStatusElements.forEach(element => {
                element.className = `sync-status ${status}`;
                const span = element.querySelector('span');
                if (span) {
                    span.textContent = text;
                }
            });
        }

        // Êú¨Âú∞ÂÑ≤Â≠òÂáΩÊï∏
        function saveLocal() { 
            StorageManager.save(app.data, true);
            alert('Ë≥áÊñôÂ∑≤ÂÑ≤Â≠òÂà∞Êú¨Âú∞ÔºÅ');
        }

        function loadLocal() { 
            const data = StorageManager.load();
            if (data) {
                app.data = migrateToV2(data);
                loadProject(app.currentProject, false);
                alert('Êú¨Âú∞Ë≥áÊñôÂ∑≤ËºâÂÖ•ÔºÅ');
            } else {
                alert('Ê≤íÊúâÊâæÂà∞Êú¨Âú∞Ë≥áÊñôÔºÅ');
            }
        }

        function clearAll() {
            if (confirm('Á¢∫ÂÆöË¶ÅÊ∏ÖÈô§ÊâÄÊúâË≥áÊñôÂóéÔºüÊ≠§Êìç‰ΩúÁÑ°Ê≥ïÂæ©ÂéüÔºÅ')) {
                app.data = createEmptyData();
                loadProject(app.currentProject, false);
                StorageManager.save(app.data, true);
            }
        }

        function clearAH() {
            if (confirm('Á¢∫ÂÆöË¶ÅÊ∏ÖÈô§ A-H Ê†ºÂ≠êÂÖßÂÆπÂóéÔºü')) {
                const project = app.data.projects[app.currentProject];
                ['A','B','C','D','E','F','G','H'].forEach(letter => {
                    project.cells[letter] = '';
                    for (let i = 1; i <= 8; i++) {
                        project.cells[letter + i] = '';
                    }
                });
                
                if (app.currentView === '9x9') {
                    renderNineByNine();
                } else if (app.currentLayer === 'main') {
                    renderMainLayer();
                } else {
                    renderSubLayer(app.currentLayer);
                }
                
                StorageManager.save(app.data, true);
            }
        }

        // GitHub Áõ∏ÈóúÂáΩÊï∏
        function showGitHubModal() {
            document.getElementById('githubModal').style.display = 'block';
            document.getElementById('githubToken').value = app.token;
            document.getElementById('gistId').value = app.gistId || '';
            document.getElementById('autoUploadToggle').checked = app.autoUploadEnabled;
            document.getElementById('autoUploadInterval').value = app.autoUploadIntervalMinutes;
            
            const intervalGroup = document.getElementById('autoUploadIntervalGroup');
            intervalGroup.style.display = app.autoUploadEnabled ? 'block' : 'none';
            
            document.getElementById('autoUploadToggle').addEventListener('change', function() {
                intervalGroup.style.display = this.checked ? 'block' : 'none';
            });
        }

        function closeGitHubModal() {
            document.getElementById('githubModal').style.display = 'none';
        }

        function saveGitHubConfig() {
            const token = document.getElementById('githubToken').value.trim();
            const gistId = document.getElementById('gistId').value.trim();
            const autoUpload = document.getElementById('autoUploadToggle').checked;
            const interval = parseInt(document.getElementById('autoUploadInterval').value);
            
            app.token = token;
            app.gistId = gistId;
            app.autoUploadEnabled = autoUpload;
            app.autoUploadIntervalMinutes = interval;
            
            localStorage.setItem('github_token', token);
            localStorage.setItem('gist_id', gistId);
            localStorage.setItem('auto_upload_enabled', autoUpload);
            localStorage.setItem('auto_upload_interval', interval);
            
            if (autoUpload && token) {
                AutoUploadManager.start();
                setSyncStatus('synced', 'Â∑≤ÈÄ£Êé•');
            } else {
                AutoUploadManager.stop();
                setSyncStatus('offline', 'Èõ¢Á∑ö');
            }
            
            closeGitHubModal();
            alert('Ë®≠ÂÆöÂ∑≤ÂÑ≤Â≠òÔºÅ');
        }

        // ÂÖ∂‰ªñÂäüËÉΩÁöÑÁ∞°ÂåñÂØ¶Áèæ
        function uploadGist() { 
            if (!app.token) {
                alert('Ë´ãÂÖàË®≠ÂÆö GitHub TokenÔºÅ');
                return;
            }
            alert('‰∏äÂÇ≥ÂäüËÉΩÈñãÁôº‰∏≠...');
        }

        function downloadGist() { 
            if (!app.token) {
                alert('Ë´ãÂÖàË®≠ÂÆö GitHub TokenÔºÅ');
                return;
            }
            alert('‰∏ãËºâÂäüËÉΩÈñãÁôº‰∏≠...');
        }

        function exportJSON() { 
            const dataStr = JSON.stringify(app.data, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `mandala_${app.currentProject}_${new Date().toISOString().slice(0,10)}.json`;
            link.click();
            URL.revokeObjectURL(url);
        }

        function importJSONFile() { 
            document.getElementById('importJSONInput').click();
        }

        function handleJSONImport(input) {
            const file = input.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    app.data = migrateToV2(data);
                    loadProject(app.currentProject, false);
                    StorageManager.save(app.data, true);
                    alert('JSON Ê™îÊ°àÂåØÂÖ•ÊàêÂäüÔºÅ');
                } catch (error) {
                    alert('JSON Ê™îÊ°àÊ†ºÂºèÈåØË™§ÔºÅ');
                }
            };
            reader.readAsText(file);
        }

        function exportOPML() { alert('OPMLÂåØÂá∫ÂäüËÉΩÈñãÁôº‰∏≠...'); }
        function importOPML() { alert('OPMLÂåØÂÖ•ÂäüËÉΩÈñãÁôº‰∏≠...'); }

        // È†ÅÈù¢ËºâÂÖ•ÂÆåÊàêÂæåÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üéØ È†ÅÈù¢ËºâÂÖ•ÂÆåÊàêÔºåÈñãÂßãÂàùÂßãÂåñ...');
            
            // Ê™¢Ê∏¨ÁßªÂãïË®≠ÂÇô
            app.isMobile = isMobileDevice();
            
            if (app.isMobile) {
                console.log('üì± Ê™¢Ê∏¨Âà∞ÁßªÂãïË®≠ÂÇôÔºåÂïüÁî®ÊâãÊ©üÂÑ™Âåñ...');
                optimizeTouchForMobile();
                // ÈªòË™çÊî∂Ëµ∑ÂÅ¥ÈÇäÊ¨Ñ
                document.getElementById('sidebar').classList.add('collapsed');
            }
            
            // ÂàùÂßãÂåñË≥áÊñôÂíåÂ≠óÈ´î
            initData();
            
            // Ë®≠ÁΩÆÂ∞àÊ°àÈªûÊìä‰∫ã‰ª∂
            setupProjectClickHandlers();
            
            // ÂàùÂßãÂåñ GitHub Ë®≠ÂÆöÈ°ØÁ§∫
            if (app.token) {
                setSyncStatus('synced', 'Â∑≤ÈÄ£Êé•');
            }
            
            console.log('‚úÖ ÂàùÂßãÂåñÂÆåÊàêÔºÅÁï∂ÂâçÂ∞àÊ°à:', app.currentProject);
        });
    </script>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"rayId":"97a5a99c4956db62","serverTiming":{"name":{"cfExtPri":true,"cfEdge":true,"cfOrigin":true,"cfL4":true,"cfSpeedBrain":true,"cfCacheStatus":true}},"version":"2025.8.0","token":"4edd5f8ec12a48cfa682ab8261b80a79"}' crossorigin="anonymous"></script>
</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDtFAoG%2BfAwMT%2BPPECwslNWoup5gZJ%2BUi7EaXYWqgGCR1kHD81p8XRANplyS8ip0dVFaw%2FYFnrTQFpQnWVoAEezSaXWmkxJ4ZOkKzTKja%2Bnt798I4pe2SCq%2FK7Zy9ZTeDrf%2B0iq%2FbSdpR%2BIylL3SGIa0xjyYT2fh5aGBG14G4Dr0B3rjP011SyMdd5XcShcpkgrSZ0QGcjSWyYTetEPGNKahvaOreXwGEMhFbHLGajZYSfFyM0zrnyMei3C%2BV9UgdAm2%2F6eIFuAB4MqO6xOo4%2F048mPMCPK5pdqiOvqjhPu2IzkRFHv9mFJeosb%2FZzzcfV76WPpiTjr74WEZRpzrGuntfq9goIV6XjhgHNd0ACJERk%2FP43xPcQ5TZarQujKhJQKYTtAfisdYg77zs%2BgnpUkE%2FK3U2aTV%2BGLIk01%2BYA%2BUuNxALSNDmXlrHb0Amc7pXqfbUaQcJO%2FelFCsuOUppusMA9rTnRcXAHcG9ZdWUiN3P5hiU9TiyKmc4oT5nMt0y4JAQDN6oOEXeuNdgQ08bzTE%3D";
        window.__genspark_locale = "zh-TW";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDtFAoG+fAwMT+PPECwslNWoup5gZJ+Ui7EaXYWqgGCR1kHD81p8XRANplyS8ip0dVFaw/YFnrTQFpQnWVoAEezSaXWmkxJ4ZOkKzTKja+nt798I4pe2SCq/K7Zy9ZTeDrf+0iq/bSdpR+IylL3SGIa0xjyYT2fh5aGBG14G4Dr0B3rjP011SyMdd5XcShcpkgrSZ0QGcjSWyYTetEPGNKahvaOreXwGEMhFbHLGajZYSfFyM0zrnyMei3C+V9UgdAm2/6eIFuAB4MqO6xOo4/048mPMCPK5pdqiOvqjhPu2IzkRFHv9mFJeosb/ZzzcfV76WPpiTjr74WEZRpzrGuntfq9goIV6XjhgHNd0ACJERk/P43xPcQ5TZarQujKhJQKYTtAfisdYg77zs+gnpUkE/K3U2aTV+GLIk01+YA+UuNxALSNDmXlrHb0Amc7pXqfbUaQcJO/elFCsuOUppusMA9rTnRcXAHcG9ZdWUiN3P5hiU9TiyKmc4oT5nMt0y4JAQDN6oOEXeuNdgQ08bzTE=";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    